"use strict";var level=document.getElementById("level"),highest=document.getElementById("high"),Enemy=function(e,n,t){this.x=e,this.y=n,this.speed=t,this.sprite="images/enemy-bug.png"};Enemy.prototype.update=function(e){this.x=this.x+this.speed*level.textContent*e,550<this.x&&(this.x=-100),this.x+40>player.x&&player.x+40>this.x&&this.y+40>player.y&&player.y+40>this.y&&(player.x=200,player.y=460,level.textContent=1)},Enemy.prototype.render=function(){ctx.drawImage(Resources.get(this.sprite),this.x,this.y)};var Player=function(e,n){this.x=e,this.y=n,this.sprite="images/char-boy.png"};Player.prototype.update=function(){player.y<50&&(level.textContent++,level.textContent>highest.textContent&&highest.textContent++,document.getElementById("won").style.display="flex",player.x=200,player.y=460,won=!0)},Player.prototype.render=function(){ctx.drawImage(Resources.get(this.sprite),this.x,this.y)},Player.prototype.handleInput=function(e){document.getElementById("won").style.display="none","left"==e&&50<player.x?player.x-=100:"up"==e&&0<player.y?player.y-=75:"down"==e&&player.y<465?player.y+=75:"right"==e&&player.x<400&&(player.x+=100)};var enemy1=new Enemy(200,220,100),enemy2=new Enemy(100,140,200),enemy3=new Enemy(150,50,240),enemy4=new Enemy(80,295,50),enemy5=new Enemy(220,390,70),allEnemies=[enemy1,enemy2,enemy3,enemy4,enemy5],player=new Player(200,460);document.addEventListener("keyup",function(e){player.handleInput({37:"left",38:"up",39:"right",40:"down"}[e.keyCode])});var Engine=function(e){var t,n=e.document,a=e.window,o=n.createElement("canvas"),r=o.getContext("2d");function i(){var n,e=Date.now();n=(e-t)/1e3,allEnemies.forEach(function(e){e.update(n)}),player.update(),function(){var e,n,t=["images/water-block.png","images/stone-block.png","images/stone-block.png","images/stone-block.png","images/stone-block.png","images/stone-block.png","images/grass-block.png"];for(r.clearRect(0,0,o.width,o.height),e=0;e<7;e++)for(n=0;n<8;n++)r.drawImage(Resources.get(t[e]),101*n,83*e);allEnemies.forEach(function(e){e.render()}),player.render()}(),t=e,a.requestAnimationFrame(i)}o.width=505,o.height=707,n.body.appendChild(o),Resources.load(["images/stone-block.png","images/water-block.png","images/grass-block.png","images/enemy-bug.png","images/char-boy.png","images/Star.png"]),Resources.onReady(function(){t=Date.now(),i()}),e.ctx=r}(void 0);!function(){var t={},a=[];function n(e){if(t[e])return t[e];var n=new Image;n.onload=function(){t[e]=n,o()&&a.forEach(function(e){e()})},t[e]=!1,n.src=e}function o(){var e=!0;for(var n in t)t.hasOwnProperty(n)&&!t[n]&&(e=!1);return e}window.Resources={load:function(e){e instanceof Array?e.forEach(function(e){n(e)}):n(e)},get:function(e){return t[e]},onReady:function(e){a.push(e)},isReady:o}}();